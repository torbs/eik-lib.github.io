<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.fd17476c3">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Eik Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Eik Blog Atom Feed"><title data-react-helmet="true">Overview | Eik</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Overview | Eik"><meta data-react-helmet="true" name="description" content="Eik consist of 3 main parts. First of all Eik is an asset server for serving ECMA Script Modules (ESM) and CSS assets. Secondly, Eik is a client for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version."><meta data-react-helmet="true" property="og:description" content="Eik consist of 3 main parts. First of all Eik is an asset server for serving ECMA Script Modules (ESM) and CSS assets. Secondly, Eik is a client for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version."><meta data-react-helmet="true" property="og:url" content="https://eik.dev/docs/overview"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="alternate" href="https://eik.dev/docs/overview" hreflang="x-default"><link data-react-helmet="true" rel="canonical" href="https://eik.dev/docs/overview"><link rel="stylesheet" href="/assets/css/styles.08cff191.css">
<link rel="preload" href="/assets/js/styles.c83444d8.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.a62bf284.js" as="script">
<link rel="preload" href="/assets/js/main.0f9da99e.js" as="script">
<link rel="preload" href="/assets/js/1.799e3c41.js" as="script">
<link rel="preload" href="/assets/js/2.87ddaf3e.js" as="script">
<link rel="preload" href="/assets/js/51.d4c449c5.js" as="script">
<link rel="preload" href="/assets/js/52.5e1943db.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.e91533fe.js" as="script">
<link rel="preload" href="/assets/js/17896441.9b973016.js" as="script">
<link rel="preload" href="/assets/js/1db64337.e8bda7e1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_1oUP">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Eik Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Eik Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Eik</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/overview">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/eik-lib" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Eik Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Eik Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Eik</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/overview">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/eik-lib" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_concepts">Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_workflow">Workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_eik_json">The eik.json File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/overview_caching">Caching</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Mapping</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mapping_import_map">Import Map</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mapping_browser">Browser Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mapping_plugins">Build Tool Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/mapping_bundling">Bundling</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Client</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_login">Client Login</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_app_packages">Application Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_npm_packages">NPM Packages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_import_maps">Import Maps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_aliases">Aliases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/client_putting_it_all_together">Putting It All Together</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server">Server</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server_api">Programatic API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server_sink">Sink</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server_rest_api">REST API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server_file_structure">File structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/server_metrics">Metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CI Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ci">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/travis">Travis</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Overview</h1></header><div class="markdown"><p>Eik consist of 3 main parts. First of all Eik is an <a href="/docs/server">asset server</a> for serving <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">ECMA Script Modules (ESM)</a> and CSS assets. Secondly, Eik is a <a href="/docs/client">client</a> for easy upload and management of your assets to an Eik server. The third part is a set of utilities that can be used to align module dependencies to the same version.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>To understand Eik we need to understand what we are trying to achieve so lets start with a fairly common issue:</p><p>In a moderate or large sized web site it is very common that the site is built and served as <a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">multiple applications</a> which live at different pathnames on the site. It&#x27;s also common for each of these applications to have a dedicated team of developers with the goal of being as autonomous as possible. To achieve this, each application and team should depend on each other as little as possible.</p><p><img alt="User flow" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzE0LjQ2NjE2IiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDgzLjIwMjUwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTNlLTcuMDAwMDFoMjAxLjk3MDUydjgzLjIwMjUwN0gzZS03eiIvPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3IiBkPSJNNC4yMzMzMzM4IDkuNDk2NTdoNDcuNDcyNjAzdjY5LjQ3MjYwM0g0LjIzMzMzMzh6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTUuODE0ODM4OCAxMS40MzQzNWg0NC4wMzE0ODd2OC4zMzU4MTA3SDUuODE0ODM4OHpNNS44MTQ4Mzg4IDcyLjg2MDExaDQ0LjAzMTQ4N3Y0LjUzOTc3NDRINS44MTQ4Mzg4eiIvPjxwYXRoIGZpbGw9IiNlOWRkYWYiIGQ9Ik01LjgxNDgzODggMjAuODI4ODJoMTQuNDU5MzE2djUxLjA1NjkyN0g1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTIxLjUxMjg5NjggMjAuODI4ODJoMjguMzMzNDI2djMxLjE1NjUwMmgtMjguMzMzNDI2eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik0yMS41MTI4OTY4IDUzLjE3NDMxaDI4LjMzMzQyNnYxOC43MTE0MzdoLTI4LjMzMzQyNnoiLz48dGV4dCB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iOS44ODI5OTI3IiB5PSIxNzUuMDM4MDEiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb208L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSI1MSIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik03Ny4yNjQ1ODY4IDkuNDk2NTRoNDcuNDcyNjAzdjY5LjQ3MjYwM2gtNDcuNDcyNjAzeiIvPjxwYXRoIGZpbGw9IiNkZWFhODciIGQ9Ik03OC44NDYwOTk4IDExLjQzNDMyaDQ0LjAzMTQ4N3Y4LjMzNTgxMDdoLTQ0LjAzMTQ4N3pNNzguODQ2MDk5OCA3Mi44NjAwOGg0NC4wMzE0ODd2NC41Mzk3NzQ0aC00NC4wMzE0ODd6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTc4Ljg0NjA5OTggMjAuODI4NzloMTQuNDU5MzE2djMwLjk3NDcwN2gtMTQuNDU5MzE2eiIvPjxwYXRoIGZpbGw9IiNkZGU5YWYiIGQ9Ik05NC41NDQxNDk4IDIwLjgyODc5aDI4LjMzMzQyN3YyMC40NjA1MzVoLTI4LjMzMzQyN3oiLz48cGF0aCBmaWxsPSIjZGJlM2UyIiBkPSJNNzguOTAwMzkwOCA1My4xNzQyOWg0My45NzcxODh2MTguNzExNDM3aC00My45NzcxODh6Ii8+PHBhdGggZmlsbD0iI2UyZGJlMyIgZD0iTTk0Ljc0MzM4OTggNDIuNDI4MTVoMjcuOTQwNDgzdjkuMjQwNzMzMWgtMjcuOTQwNDgzeiIvPjx0ZXh0IHg9IjgzLjEwNDgxMyIgeT0iMTc1LjAzMTQ5IiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI4My4xMDQ4MTMiIHk9IjE3NS4wMzE0OSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbS9zaG9wPC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNMTUwLjI2NDU4OTggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTE1MS44NDYwNzk4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdoLTQ0LjAzMTQ4N3pNMTUxLjg0NjA3OTggNzIuODYwMWg0NC4wMzE0ODd2NC41Mzk3NzQ0aC00NC4wMzE0ODd6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTE1Mi4wNDU4OTk4IDIwLjgyODgyaDQzLjgzMTY2NXYzMS4xNTY1MDJoLTQzLjgzMTY2NXoiLz48cGF0aCBmaWxsPSIjZTJkYmUzIiBkPSJNMTUyLjE5MTQzOTggNTMuMTc0MzFoNDMuNjg2MTQydjE4LjcxMTQzN2gtNDMuNjg2MTQyeiIvPjx0ZXh0IHg9IjE1Ni4wMzIwMyIgeT0iMTc1LjE3NzA1IiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSIxNTYuMDMyMDMiIHk9IjE3NS4xNzcwNSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbS9jaGVja291dDwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9IiM5OTkiIGQ9Ik03NC4xNjI4MTY4IDQyLjAwNzY1bC03Ljg4NzM2MS00LjUzODcydjMuNTgzMjRoLTEyLjU5NDM0MlY0Mi45MThoMTIuNTk0MzQydjMuNjA0NDR6TTE0Ny42ODAyNjk4IDQyLjAwNzY1bC03Ljg4NzM2LTQuNTM4NzJ2My41ODMyNGgtMTIuNTk0MzRWNDIuOTE4aDEyLjU5NDM0djMuNjA0NDR6Ii8+PC9zdmc+"></p><p>Lets say we have a site where the front page (<code>site.com</code>) is one application. Then we have a web shop, a second application, on <code>site.com/shop</code> and finally there is a third application handling checkout on <code>site.com/checkout</code>. A user will normally arrive at the front page, move to browsing the shop and then finish at the checkout.</p><p>Let&#x27;s also say that all of these applications are using <a href="https://lit-html.polymer-project.org/" target="_blank" rel="noopener noreferrer">lit-html</a> for templating in the browser. We then have different applications depending on the same library that we want to be developed and deployed to production autonomously. Problems can arise when some of these application start to depend on different versions of the same library.</p><p><img alt="Non-optimised loading of assets" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzUxLjI1MDAzIiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDkyLjkzNDkwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTS0yZS03LjAwMDAxaDIwMS45NzA1MnY5Mi45MzQ5MDZILTJlLTd6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik00LjIzMzMzMzggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzSDQuMjMzMzMzOHoiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNNS44MTQ4Mzg4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdINS44MTQ4Mzg4ek01LjgxNDgzODggNzIuODYwMTFoNDQuMDMxNDg3djQuNTM5Nzc0NEg1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTUuODE0ODM4OCAyMC44Mjg4MmgxNC40NTkzMTZ2NTEuMDU2OTI3SDUuODE0ODM4OHoiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMjEuNTEyODk2OCAyMC44Mjg4MmgyOC4zMzM0MjZ2MzEuMTU2NTAyaC0yOC4zMzM0MjZ6Ii8+PHBhdGggZmlsbD0iI2RiZTNlMiIgZD0iTTIxLjUxMjg5NjggNTMuMTc0MzFoMjguMzMzNDI2djE4LjcxMTQzN2gtMjguMzMzNDI2eiIvPjxwYXRoIHN0cm9rZT0iIzAzMDAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NyIgZD0iTTUuODE0ODM4OCA4MC44OTkwOXY4LjA2NzA3TTUuODY1NjI5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTQuNDc0MDMyIiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE0LjQ3NDAzMiIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NzgiPi8xLjIuMC9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHg9IjkuODgyOTkyNyIgeT0iMTc1LjAzODAxIiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbTwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTc3LjI2NDU4NjggOS40OTY1NGg0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTc4Ljg0NjA5OTggMTEuNDM0MzJoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek03OC44NDYwOTk4IDcyLjg2MDA4aDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZTlkZGFmIiBkPSJNNzguODQ2MDk5OCAyMC44Mjg3OWgxNC40NTkzMTZ2MzAuOTc0NzA3aC0xNC40NTkzMTZ6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTk0LjU0NDE0OTggMjAuODI4NzloMjguMzMzNDI3djIwLjQ2MDUzNWgtMjguMzMzNDI3eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik03OC45MDAzOTA4IDUzLjE3NDI5aDQzLjk3NzE4OHYxOC43MTE0MzdoLTQzLjk3NzE4OHoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik03OC44NDYwOTM4IDgwLjg5OTA4djguMDY3MDgiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNNzguODk2ODg0OCA4Ni4xMzkyM2gxLjg0Nzc3Ii8+PHRleHQgeD0iODcuNTA1Mjg3IiB5PSIyNTUuMjEyNjYiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9Ijg3LjUwNTI4NyIgeT0iMjU1LjIxMjY2IiBmb250LXNpemU9IjMuNTI3Nzc3NzgiPi8xLjEuMS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9IiNlMmRiZTMiIGQ9Ik05NC43NDMzODk4IDQyLjQyODE1aDI3Ljk0MDQ4M3Y5LjI0MDczMzFoLTI3Ljk0MDQ4M3oiLz48dGV4dCB4PSI4My4xMDQ4MTMiIHk9IjE3NS4wMzE0OSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iODMuMTA0ODEzIiB5PSIxNzUuMDMxNDkiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb20vc2hvcDwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTE1MC4yNjQ1ODk4IDkuNDk2NTdoNDcuNDcyNjAzdjY5LjQ3MjYwM2gtNDcuNDcyNjAzeiIvPjxwYXRoIGZpbGw9IiNkZWFhODciIGQ9Ik0xNTEuODQ2MDc5OCAxMS40MzQzNWg0NC4wMzE0ODd2OC4zMzU4MTA3aC00NC4wMzE0ODd6TTE1MS44NDYwNzk4IDcyLjg2MDFoNDQuMDMxNDg3djQuNTM5Nzc0NGgtNDQuMDMxNDg3eiIvPjxwYXRoIGZpbGw9IiNkZGU5YWYiIGQ9Ik0xNTIuMDQ1ODk5OCAyMC44Mjg4Mmg0My44MzE2NjV2MzEuMTU2NTAyaC00My44MzE2NjV6Ii8+PHBhdGggZmlsbD0iI2UyZGJlMyIgZD0iTTE1Mi4xOTE0Mzk4IDUzLjE3NDMxaDQzLjY4NjE0MnYxOC43MTE0MzdoLTQzLjY4NjE0MnoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik0xNTEuODQ2MDg5OCA4MC44OTkwOXY4LjA2NzA3Ii8+PHBhdGggZmlsbD0iIzk5OSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTE1MS44OTY4ODk4IDg2LjEzOTI0aDEuODQ3NzciLz48dGV4dCB4PSIxNjAuNTA1MjgiIHk9IjI1NS4yMTI2OCIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iMTYwLjUwNTI4IiB5PSIyNTUuMjEyNjgiIGZvbnQtc2l6ZT0iMy41Mjc3Nzc3OCI+LzEuMS4yL2xpdC1odG1sLmpzIDx0c3BhbiBmaWxsPSJyZWQiPihmZXRjaGVkKTwvdHNwYW4+PC90c3Bhbj48L3RleHQ+PHRleHQgeD0iMTU2LjAzMjAzIiB5PSIxNzUuMTc3MDUiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE1Ni4wMzIwMyIgeT0iMTc1LjE3NzA1IiBmb250LXNpemU9IjQuMjMzMzMzNTkiPnNpdGUuY29tL2NoZWNrb3V0PC90c3Bhbj48L3RleHQ+PHBhdGggZmlsbD0iIzk5OSIgZD0iTTc0LjE2MjgxNjggNDIuMDA3NjVsLTcuODg3MzYxLTQuNTM4NzJ2My41ODMyNGgtMTIuNTk0MzQyVjQyLjkxOGgxMi41OTQzNDJ2My42MDQ0NHpNMTQ3LjY4MDI2OTggNDIuMDA3NjVsLTcuODg3MzYtNC41Mzg3MnYzLjU4MzI0aC0xMi41OTQzNFY0Mi45MThoMTIuNTk0MzR2My42MDQ0NHoiLz48L3N2Zz4="></p><p>Our challenge is to avoid the end user having to end up downloading different versions of the same library as they move between the different applications on our site. We want to maximize end user performance by downloading lit-html once and not having to download one specific version when accessing <code>site.com</code> (eg. v1.2.0) and then downloading another specific version (eg. v1.1.1) when moving to <code>site.com/shop</code> and finally ending up with perhaps having to download yet another version (eg. v1.1.2) when they check out at <code>site.com/checkout</code>.</p><p><img alt="Optimised loading of assets" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3NjMuMzUzMTUiIGhlaWdodD0iMzUxLjI1MDAzIiB2aWV3Qm94PSIwIDAgMjAxLjk3MDUyIDkyLjkzNDkwNyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTS0yZS03LjAwMDAxaDIwMS45NzA1MnY5Mi45MzQ5MDZILTJlLTd6Ii8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iNTEiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik00LjIzMzMzMzggOS40OTY1N2g0Ny40NzI2MDN2NjkuNDcyNjAzSDQuMjMzMzMzOHoiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNNS44MTQ4Mzg4IDExLjQzNDM1aDQ0LjAzMTQ4N3Y4LjMzNTgxMDdINS44MTQ4Mzg4ek01LjgxNDgzODggNzIuODYwMTFoNDQuMDMxNDg3djQuNTM5Nzc0NEg1LjgxNDgzODh6Ii8+PHBhdGggZmlsbD0iI2U5ZGRhZiIgZD0iTTUuODE0ODM4OCAyMC44Mjg4MmgxNC40NTkzMTZ2NTEuMDU2OTI3SDUuODE0ODM4OHoiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMjEuNTEyODk2OCAyMC44Mjg4MmgyOC4zMzM0MjZ2MzEuMTU2NTAyaC0yOC4zMzM0MjZ6Ii8+PHBhdGggZmlsbD0iI2RiZTNlMiIgZD0iTTIxLjUxMjg5NjggNTMuMTc0MzFoMjguMzMzNDI2djE4LjcxMTQzN2gtMjguMzMzNDI2eiIvPjxwYXRoIHN0cm9rZT0iIzAzMDAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NyIgZD0iTTUuODE0ODM4OCA4MC44OTkwOXY4LjA2NzA3TTUuODY1NjI5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTQuNDc0MDMyIiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE0LjQ3NDAzMiIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0icmVkIj4oZmV0Y2hlZCk8L3RzcGFuPjwvdHNwYW4+PC90ZXh0Pjx0ZXh0IHg9IjkuODgyOTkyNyIgeT0iMTc1LjAzODAxIiBzdHJva2Utd2lkdGg9Ii4yNjQ1ODMzMiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTAuNTgzMzMzMDIiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTYuMDMxMjUwMiAtMTY3Ljg0NjQpIiB3b3JkLXNwYWNpbmc9IjAiPjx0c3BhbiB4PSI5Ljg4Mjk5MjciIHk9IjE3NS4wMzgwMSIgZm9udC1zaXplPSI0LjIzMzMzMzU5Ij5zaXRlLmNvbTwvdHNwYW4+PC90ZXh0PjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjUxIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3NiIgZD0iTTc3LjI2NDU4NjggOS40OTY1NGg0Ny40NzI2MDN2NjkuNDcyNjAzaC00Ny40NzI2MDN6Ii8+PHBhdGggZmlsbD0iI2RlYWE4NyIgZD0iTTc4Ljg0NjA5OTggMTEuNDM0MzJoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek03OC44NDYwOTk4IDcyLjg2MDA4aDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZTlkZGFmIiBkPSJNNzguODQ2MDk5OCAyMC44Mjg3OWgxNC40NTkzMTZ2MzAuOTc0NzA3aC0xNC40NTkzMTZ6Ii8+PHBhdGggZmlsbD0iI2RkZTlhZiIgZD0iTTk0LjU0NDE0OTggMjAuODI4NzloMjguMzMzNDI3djIwLjQ2MDUzNWgtMjguMzMzNDI3eiIvPjxwYXRoIGZpbGw9IiNkYmUzZTIiIGQ9Ik03OC45MDAzOTA4IDUzLjE3NDI5aDQzLjk3NzE4OHYxOC43MTE0MzdoLTQzLjk3NzE4OHoiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2NjciIGQ9Ik03OC44NDYwOTM4IDgwLjg5OTA4djguMDY3MDgiLz48cGF0aCBmaWxsPSIjOTk5IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iLjUyOTE2Njc2IiBkPSJNNzguODk2ODg0OCA4Ni4xMzkyM2gxLjg0Nzc3Ii8+PHRleHQgeD0iODcuNTA1Mjg3IiB5PSIyNTUuMjEyNjYiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9Ijg3LjUwNTI4NyIgeT0iMjU1LjIxMjY2IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0iZ3JlZW4iPihjYWNoZWQpPC90c3Bhbj48L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjZTJkYmUzIiBkPSJNOTQuNzQzMzg5OCA0Mi40MjgxNWgyNy45NDA0ODN2OS4yNDA3MzMxaC0yNy45NDA0ODN6Ii8+PHRleHQgeD0iODMuMTA0ODEzIiB5PSIxNzUuMDMxNDkiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjgzLjEwNDgxMyIgeT0iMTc1LjAzMTQ5IiBmb250LXNpemU9IjQuMjMzMzMzNTkiPnNpdGUuY29tL3Nob3A8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSI1MSIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik0xNTAuMjY0NTg5OCA5LjQ5NjU3aDQ3LjQ3MjYwM3Y2OS40NzI2MDNoLTQ3LjQ3MjYwM3oiLz48cGF0aCBmaWxsPSIjZGVhYTg3IiBkPSJNMTUxLjg0NjA3OTggMTEuNDM0MzVoNDQuMDMxNDg3djguMzM1ODEwN2gtNDQuMDMxNDg3ek0xNTEuODQ2MDc5OCA3Mi44NjAxaDQ0LjAzMTQ4N3Y0LjUzOTc3NDRoLTQ0LjAzMTQ4N3oiLz48cGF0aCBmaWxsPSIjZGRlOWFmIiBkPSJNMTUyLjA0NTg5OTggMjAuODI4ODJoNDMuODMxNjY1djMxLjE1NjUwMmgtNDMuODMxNjY1eiIvPjxwYXRoIGZpbGw9IiNlMmRiZTMiIGQ9Ik0xNTIuMTkxNDM5OCA1My4xNzQzMWg0My42ODYxNDJ2MTguNzExNDM3aC00My42ODYxNDJ6Ii8+PHBhdGggZmlsbD0iIzk5OSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9Ii41MjkxNjY3IiBkPSJNMTUxLjg0NjA4OTggODAuODk5MDl2OC4wNjcwNyIvPjxwYXRoIGZpbGw9IiM5OTkiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIuNTI5MTY2NzYiIGQ9Ik0xNTEuODk2ODg5OCA4Ni4xMzkyNGgxLjg0Nzc3Ii8+PHRleHQgeD0iMTYwLjUwNTI4IiB5PSIyNTUuMjEyNjgiIHN0cm9rZS13aWR0aD0iLjI2NDU4MzMyIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMC41ODMzMzMwMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNi4wMzEyNTAyIC0xNjcuODQ2NCkiIHdvcmQtc3BhY2luZz0iMCI+PHRzcGFuIHg9IjE2MC41MDUyOCIgeT0iMjU1LjIxMjY4IiBmb250LXNpemU9IjMuNTI3Nzc3NjciPi92MS9saXQtaHRtbC5qcyA8dHNwYW4gZmlsbD0iZ3JlZW4iPihjYWNoZWQpPC90c3Bhbj48L3RzcGFuPjwvdGV4dD48dGV4dCB4PSIxNTYuMDMyMDMiIHk9IjE3NS4xNzcwNSIgc3Ryb2tlLXdpZHRoPSIuMjY0NTgzMzIiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjEwLjU4MzMzMzAyIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC02LjAzMTI1MDIgLTE2Ny44NDY0KSIgd29yZC1zcGFjaW5nPSIwIj48dHNwYW4geD0iMTU2LjAzMjAzIiB5PSIxNzUuMTc3MDUiIGZvbnQtc2l6ZT0iNC4yMzMzMzM1OSI+c2l0ZS5jb20vY2hlY2tvdXQ8L3RzcGFuPjwvdGV4dD48cGF0aCBmaWxsPSIjOTk5IiBkPSJNNzQuMTYyODE2OCA0Mi4wMDc2NWwtNy44ODczNjEtNC41Mzg3MnYzLjU4MzI0aC0xMi41OTQzNDJWNDIuOTE4aDEyLjU5NDM0MnYzLjYwNDQ0ek0xNDcuNjgwMjY5OCA0Mi4wMDc2NWwtNy44ODczNi00LjUzODcydjMuNTgzMjRoLTEyLjU5NDM0VjQyLjkxOGgxMi41OTQzNHYzLjYwNDQ0eiIvPjwvc3ZnPg=="></p><p>The Eik solution is to make all applications point to the same version of the same library in production despite that the applications are developed using different patch or minor version. If the library then has appropriate HTTP cache headers, the browser will do the rest and make sure the library is loaded over the wire only once during the user&#x27;s visit to our site.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-eik-works"></a>How Eik works<a class="hash-link" href="#how-eik-works" title="Direct link to heading">#</a></h2><p>The main role of the Eik server is to serve static assets uploaded to the server. Upon upload, assets will be given a new versioned pathname for each upload and are considered immutable. A change in an asset is a new version on the Eik server. By doing so, served assets can be cached forever in the end users browser.</p><p>The Eik server also has the concept called an alias. An alias is a non immutable pathname which can be set to redirect requests to it, to an immutable asset pathname. </p><p>For example, let us say that we upload lit-html version 1.1.1 to an Eik server. This version of lit-html will then live on the immutable URL <code>/npm/lit-html/1.1.1</code>. We can then set an alias for lit-html and this alias will be on the non immutable pathname <code>/npm/lit-html/v1</code>. Any request to any file under the alias at <code>/npm/lit-html/v1</code> will then be redirected to the matching file under <code>/npm/lit-html/1.1.1</code>.</p><p>Later on, when we publish lit-html version 1.2.0 to the Eik server, this version will then live on the immutable pathname <code>/npm/lit-html/1.2.0</code>. We can then update the existing alias at the non immutable pathname <code>/npm/lit-html/v1</code> to point to the new version. Requests to any file under the alias at <code>/npm/lit-html/v1</code> will then be redirected to its matching file under <code>/npm/lit-html/1.2.0</code>.</p><p>In order to meet the challenge outlined in the introduction above, each of the applications described can load lit-html through its alias (<code>/npm/lit-html/v1</code>) and they will all load the same version. The alias acts as a static path to a shared library (in this case lit-html) across all the applications. It&#x27;s then possible to publish new versions of a library without having to rebuild and redeploy each application to production. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="esm-imports"></a>ESM imports<a class="hash-link" href="#esm-imports" title="Direct link to heading">#</a></h2><p>Before we proceed, we should go over some ESM import statement basics. </p><p>ESM import statements can be relative. A relative ESM import statement must start with either <code>/</code>, <code>./</code> or <code>../</code>:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> mymod </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> mymod </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> mymod </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../my_module.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ESM import statements can also be absolute in which case they must start with an HTTP protocol:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> mylib </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://eik-server.com/pkg/mylib/v3/main.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Due to the prevalence of asset bundling, it&#x27;s very common to see ESM import statements which do not comply with any of the statements outlined above (note that <code>my_library</code> does not start with <code>/</code>, <code>./</code> or <code>../</code>):</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> mylib </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;my_library&#x27;</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>These type of statements are called &quot;bare imports&quot; and are not legal ESM import statements. A browser can not handle such an import statement. Bare import statements are commonly used when a module is installed through a package manager, such as NPM, and then transpiled through a build step to one of the legal ESM import statements before being served to the browser.</p><p>In Eik, we utilize bare imports to align modules (ex; the applications in our example) to the same version of modules it depends on (ex; lit-html in our example). Which brings us to Import Maps.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="import-maps"></a>Import Maps<a class="hash-link" href="#import-maps" title="Direct link to heading">#</a></h2><p><a href="https://github.com/WICG/import-maps" target="_blank" rel="noopener noreferrer">Import Maps</a> is fairly new and up and coming web standard. An Import Map is a simple object mapping between a bare import statement and a legal ESM import statement. The idea is that an Import Map should be used to map bare import statements to fully qualified import statements in ESM.</p><p>An Import Map looks something like this:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;my_library&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://eik-server.com/pkg/mylib/v3/main.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;lit-html&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://eik-server.com/npm/lit-html/v1/lit-html.js&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Eik has support for storing Import Maps under a dedicated namespace. Import Maps are versioned and immutable and can be aliased in the same way that assets can.</p><p>Eik&#x27;s mapping utils is used to apply Import Maps to assets during bundling.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="mapping-it-together"></a>Mapping it together<a class="hash-link" href="#mapping-it-together" title="Direct link to heading">#</a></h2><p>In Eik, we use Import Maps and aliasing of assets to align the versions of libraries across multiple applications on a site while maintaining the possibility to develop and deploy each application to production separately.</p><p>Let&#x27;s go through this, keeping in mind the challenge we outlined in the introduction above.</p><p>We know that lit-html is a library that all our applications will be using so we want to align the version in use across all of them. To do so, we publish version 1.2.0 of lit-html to our Eik server after which time it will be available at <code>https://eik-server.com/npm/lit-html/1.2.0</code>.</p><p>To make the reference to lit-html more static over time we create an alias to point to version 1.2.0 and lit-html can be requested through <code>https://eik-server.com/npm/lit-html/v1</code>. As mentioned earlier, this give us the possibillity to update versions of lit-html without having to rebuild and redeploy each of our applications to production.</p><p>Next, we need to create a mapping between the bare import statement developers will use when developing the applications and the aliased URL of lit-html. We can do so by making an Import Map as follow:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;lit-html&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/npm/lit-html/v1/lit-html.js&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Once created, we publish this Import Map to our Eik server and then create an alias for it. If we were to name the Import Map &quot;site-mapping&quot; and versioned it as 1.0.1 during the upload to the Eik server, it would then be available at the alias URL <code>https://eik-server.com/map/site-mapping/v1</code>.</p><p>In each application we can now depend on and install lit-html through NPM as is common practice. Each application can then locally reference lit-html through its bare import statement like so:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> render</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;lit-html&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the build tool used by the applications we can now add the appropriate Eik mapping utility which will read a set of defined Import Maps (in our example, &quot;site-mapping&quot;) from the Eik server and apply these Import Maps to the application code. This will map our bare import statements into legal ESM import statements pointing to the lit-html alias defined in the Import Map:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> lit </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/npm/lit-html/v1/lit-html.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now our application defines an ESM import statement that points to the alias for lit-html which makes sure multiple applications on our site align to the same version of lit-html. By doing this, we&#x27;re able to develop our application in isolation without depending or interfering with any other applications that utilize the same library.</p><p>The final step in this process is uploading the application code as a package to the Eik server. Which is done by the Eik client.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/overview_concepts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concepts Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#how-eik-works" class="table-of-contents__link">How Eik works</a></li><li><a href="#esm-imports" class="table-of-contents__link">ESM imports</a></li><li><a href="#import-maps" class="table-of-contents__link">Import Maps</a></li><li><a href="#mapping-it-together" class="table-of-contents__link">Mapping it together</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 - FINN.no.</div></div></div></footer></div>
<script src="/assets/js/styles.c83444d8.js"></script>
<script src="/assets/js/runtime~main.a62bf284.js"></script>
<script src="/assets/js/main.0f9da99e.js"></script>
<script src="/assets/js/1.799e3c41.js"></script>
<script src="/assets/js/2.87ddaf3e.js"></script>
<script src="/assets/js/51.d4c449c5.js"></script>
<script src="/assets/js/52.5e1943db.js"></script>
<script src="/assets/js/935f2afb.e91533fe.js"></script>
<script src="/assets/js/17896441.9b973016.js"></script>
<script src="/assets/js/1db64337.e8bda7e1.js"></script>
</body>
</html>